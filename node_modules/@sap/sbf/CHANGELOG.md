# Change Log
All notable changes to this project will be documented in this file.

This project adheres to [Semantic Versioning](http://semver.org/).

The format is based on [Keep a Changelog](http://keepachangelog.com/).

<a name="4.1.0"></a>
## 4.1.0 - 2019-01-30

### Added
- Expose credential providers

### Fixed
- Docu: add `SBF_SBSS_RESTRICTED_USER_SERVICE` to the list of environment variables

<a name="4.0.0"></a>
## 4.0.0 - 2019-01-18

### Changed
- _@sap/sbf_ now depends on _@sap/sbss_ v4 which no longer brings the _@sap/hdbext_ package by default.
Brokers that use SBSS on HANA need to explicitly specify _@sap/hdbext_ as a dependency.

### Fixed
- Added Node 8 to list of supported versions

<a name="3.3.1"></a>
## 3.3.1 - 2019-01-11

### Fixed
- Typo: property `saasregistryenable` is now renamed to `saasregistryenabled`

<a name="3.3.0"></a>
## 3.3.0 - 2019-01-08

### Added
- Support for `subaccount_id` in SBSS on PostgreSQL

### Fixed
- Using empty string as user name during audit logging on Kubernetes

<a name="3.2.0"></a>
## 3.2.0 - 2018-12-04

### Added
- Support for Business Service
- Improvements in documentation

<a name="3.1.0"></a>
## 3.1.0 - 2018-10-25

### Added
- Utility function to make HTTP calls to XSUAA
- Specify catalog.json file via `SBF_CATALOG_FILE` environment variable
- Improvements in documentation

## 3.0.0 - 2018-09-20

### Changed
- Version 4 of the _@sap/logging_ package is now used. The `requestId` property is no longer available in `params.req.loggingContext` (in custom hooks). Use the `correlationId` for correlating log entries from different components involved in a broker operation.

### Added
- Support for CF Log format (via adopting _@sap/logging_ v4).
- Provisioning with XSUAA credentials provider: use `subaccount_id` if provided.

### Fixed
- Validation of update requests.
- Updated dependencies.

## 2.1.2 - 2018-08-14

### Fixed
 - Updated dependencies
 - Validation of provision and bind requests

## 2.1.1 - 2018-07-27

### Fixed
 - Update 'request' to v2.87.0

## 2.1.0 - 2018-06-07

### Added
 - 'user_id' and 'originating_identity' properties are available in custom hooks
 - 'req' object is available in custom hooks
 - New "Audit logging" section in README.md
 - Support for OSB API context

### Fixed
 - Enhanced example applications
 - Propagate some XSUAA errors to the client
 - Updated dependencies

## 2.0.0 - 2018-04-12

See the [migration guide](migration.md) how to adapt to incompatible changes.

### Changed
- Audit log service integration (**Incompatible**)
- PostgreSQL restricted user support (**Incompatible**)
- Reverse the order of operations during unbind and deprovision (**Incompatible**)
- X-Broker-API-version header is now mandatory (**Incompatible**)

### Removed
- The old format where `xsappname` and the other security properties appear on root level is removed when creating a service instance (**Incompatible**)

### Added
- Enforce secure outgoing connections via environment variable `SBF_SECURE_OUTGOING_CONNECTIONS`
- Configure timeout for requests to XSUAA via environment variable `SBF_UAA_TIMEOUT`
- New "Error handling" section in README.md
- Memory consumption sizing guide
- Documented how to limit heap size

## 1.5.0 - 2017-12-12

### Added
- Allow to set scopes/authorities per service/plan with environment variable
- New section in the readme about asynchronous broker operations

### Fixed
- Propagate some XSUAA errors to the client side
- Change X-Broker-Api-Version check in order to work with XSA

## 1.4.0 - 2017-10-25

### Added
- Add support for hashed broker password
- Script for generating hashed broker password
- Allow to embed SBF in an express.js application
- Support new SBSS version
- Script for generating unique ids in service catalog
- Pass generated credentials to the `onBind` hook
- Java examples
- Added "Security" section in README.md
- Verify service catalog for consistency
- Log warning if broker password is shorter than 15 characters

### Fixed
- Deprovision does not fail if UAA cloning is already deleted (Allow to retry deprovision operation)
- Properly encode URL parameters in outbound requests

## 1.3.0 - 2017-08-16

### Added
- Allow for custom parameters in create service operation
- New section in the readme about providing custom parameters
- Simple example to register the broker automatically with MTA descriptor

## 1.2.0 - 2017-08-03

### Added
- Troubleshooting section in the readme
- New section in the readme about extending the service broker
- Example for OAuth authentication with client credentials grant
- Example for OAuth authentication with user token grant
- Example using MTA and deploy service
- Provide catalog suffix via broker URL

## 1.1.0 - 2017-06-02

### Added
- OAuth authentication with UAA

## 1.0.1 - 2017-05-18

### Fixed
- Broker will fail if `serviceConfig` contains service that is not defined in *catalog.json*
- Only `onBind` hook is required to be implemented if `autoCredentials: false`
