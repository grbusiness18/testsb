'use strict';

const assert = require('assert');
const HanaClient = require('./hana-client');
const PostgresClient = require('./postgres-client');

module.exports = factory;

function factory(options) {
  assert(options && typeof options === 'object', 'options should be an object');
  if (/^jdbc:sap:/.test(options.url)) {
    return new HanaClient(options);
  }
  if (/^postgres:/.test(options.uri)) {
    return new PostgresClient(options);
  }
  throw new Error('Provided options seem to be neither for HANA nor for PostgreSQL');
}
